.. _prop_slhmc:

===================
slhmc.propの書式
===================

\ :file:`slhmc.prop`\ のテンプレートは、 ``slhmc --template`` で出力できます。

行頭が#または!の行はコメントとして扱われます。

.. describe:: restart

 :デフォルト: 1

 0の場合、最初から力場生成を実行します。1の場合、\ :file:`slhmc.restart`\ およびフォルダ内のその他のファイルから情報を読み込み、力場生成を再開します。

.. describe:: initialTrain

 :デフォルト: 200

 初期構造から第一原理分子動力学計算を行う際のステップ数です。この構造を元に初期ニューラルネットワーク力場を作ります。0に設定した場合、フォルダにある力場ファイル :file:`ffield.sannp` を初期力場として使います。

.. describe:: refreshTrain

 :デフォルト: 1

 新規に（ ``restart 0`` と設定して）実行した場合、フォルダ内にある以前の教師データを使う(0)か新たに最初からデータを作る(1)かの設定です。

.. describe:: acceptedOnly

 :デフォルト: 0

 ニューラルネットワークの教師データとして、モンテカルロ法で採択された構造だけを使う(1)か、棄却されたものも含めた全ての構造を使う(0)かの設定です。

.. describe:: nnpDumpAll

 :デフォルト: 0

 ニューラルネットワーク力場を使った分子動力学計算で、原子座標等のファイル出力を全ステップで行う(1)か、最初と最後のステップのみで行う(0)かの設定です。

.. describe:: nnpSteps

 :デフォルト: 10

 ニューラルネットワーク力場を使った分子動力学計算の（初期）ステップ数です。

.. describe:: nnpStepsAuto

 :デフォルト: 1

 ニューラルネットワーク力場を使った分子動力学計算のステップ数を、モンテカルロ法の採択率に応じて自動的に変更する(1)か、固定する(0)かの設定です。

.. describe:: nnpStepsMax

 :デフォルト: 2000

 ニューラルネットワーク力場を使った分子動力学計算のステップ数の上限です。

.. describe:: nnpStepUp

 :デフォルト: 0.20

 モンテカルロ法の採択率がこの値以上になった場合に、ニューラルネットワーク力場を使った分子動力学計算のステップ数を増やします。

.. describe:: nnpStepDown

 :デフォルト: 0.05

 モンテカルロ法の採択率がこの値以下になった場合に、ニューラルネットワーク力場を使った分子動力学計算のステップ数を減らします。

.. describe:: dftSteps

 :デフォルト: 100

 ニューラルネットワークの再学習を行うまでに何回モンテカルロステップを行うか（＝何回第一原理計算を行うか）の設定です。

.. describe:: trainSteps

 :デフォルト: 50

 ニューラルネットワークの再学習を行う回数です。指定した回数の再学習が終わったら、実行を終了します。

.. describe:: timeStep

 :デフォルト: 0.25

 ニューラルネットワーク力場を使った分子動力学計算、および初期ニューラルネットワーク力場を作るための第一原理分子動力学計算の時間刻み(fs)です。

.. describe:: temperature

 :デフォルト: 300.0

 メトロポリス法で使う温度(K)です。

.. describe:: nphMethod

 :デフォルト: asNptMC

 SLHMCのプロセス中にセルの変形を行うかどうかの設定です。noneを指定すると変形を行わず、初期構造のセルを維持します。aprioriを指定すると、ニューラルネットワーク力場による分子動力学計算の前にNPHによるセルの変形を行います。asNptMCを指定すると、ニューラルネットワーク力場による分子動力学計算をNPHで行います。

 ``aprioriNPH 1`` を指定した場合、 ``nphMethod apriori`` と同じ設定になります。

.. describe:: nphBoxType

 :デフォルト: tri

 セルの変形を行う場合の制約条件の設定です。

 .. table::
  :widths: auto

  +------------------------------------+---------------------------------------------------------------------------------------------------------------------------+
  | iso                                | 等方的な変形を許す                                                                                                        |
  +------------------------------------+---------------------------------------------------------------------------------------------------------------------------+
  | aniso                              | x,y,z軸方向の伸縮を許す                                                                                                   |
  +------------------------------------+---------------------------------------------------------------------------------------------------------------------------+
  | tri                                | 任意の変形を許す                                                                                                          |
  +------------------------------------+---------------------------------------------------------------------------------------------------------------------------+
  || xy-iso                            | 2つの軸方向の同じ割合での伸縮を許す                                                                                       |
  || yz-iso                            |                                                                                                                           |
  || xz-iso                            |                                                                                                                           |
  +------------------------------------+---------------------------------------------------------------------------------------------------------------------------+
  || xy-aniso                          | 2つの軸方向の伸縮を許す                                                                                                   |
  || yz-aniso                          |                                                                                                                           |
  || xz-aniso                          |                                                                                                                           |
  +------------------------------------+---------------------------------------------------------------------------------------------------------------------------+
  || xy                                | 2つの軸を含む面内の任意の変形を許す                                                                                       |
  || yz                                |                                                                                                                           |
  || xz                                |                                                                                                                           |
  +------------------------------------+---------------------------------------------------------------------------------------------------------------------------+
  || x                                 | 1つの軸方向の伸縮を許す                                                                                                   |
  || y                                 |                                                                                                                           |
  || z                                 |                                                                                                                           |
  +------------------------------------+---------------------------------------------------------------------------------------------------------------------------+

.. describe:: nphPressure

 :デフォルト: 1.0

 セルの変形を行う場合の圧力(bar)です。

.. describe:: nphPresDamp

 :デフォルト: 250.0

 セルの変形を行う場合の圧力のダンピング時定数(fs)です。

.. describe:: endProperty

 以降のファイル内容はコメントとして扱われます。
