.. _metro:

===================
sannp.metroの書式
===================

\ :file:`sannp.metro`\ のテンプレートは、 :option:`sannp --metro-temp` で出力できます。

行頭が#または!の行はコメントとして扱われます。

SWAPPING、GEOMETRYが各セクションの始まりを表し、次の行以降がセクションの内容になります。GEOMETRYは必須です。

.. describe:: maxSteps

 モンテカルロ計算のステップ数です。

.. describe:: numGeoms

 生成する構造数です。この数だけ構造を生成すると、計算が停止します。

.. describe:: unknownGeoms

 未知の構造のみを出力対象とします。強化学習に使用します。未知構造の判定には、NNP学習時に生成された対象関数の分布(\ :file:`sannp.gdist`\ )を参照し、近い対称関数の値を持つ構造が十分にない場合に未知とします。

.. describe:: temperature

 メトロポリス法におけるボルツマン因子の温度(K)です。

.. describe:: upperEnergy

 エネルギーの上限値(eV/atom)です。この値より大きいエネルギーを持つ構造には遷移しません。

.. describe:: lowerEnergy

 エネルギーの下限値(eV/atom)です。この値より小さいエネルギーを持つ構造には遷移しません。

.. describe:: withShift

 メトロポリス法における遷移過程として原子の変位を使う(1)か使わない(0)かの指定です。

.. describe:: shiftCoord

 原子の変位距離(\ |angs|\ )です。

.. describe:: shiftInit

 計算を開始する前に、全ての原子をランダムに変位させる(1)かしない(0)かの指定です。

.. describe:: shiftCoordInit

 計算を開始する前の原子の変位距離(\ |angs|\ )です。

.. describe:: SWAPPING
 
 遷移過程として原子の入れ替えを設定します。

 1行目に入れ替えペアの数、2行目以降に入れ替えペアを元素名で指定します。元素名としてXを使うと空孔の意味になります。同じ元素名をペアにすることはできません。

 SWAPPINGセクションがない場合、遷移過程として原子の入れ替えを使いません。
 
 .. code-block:: none
  :caption: 例
  
  2
  Si C
  Si X

.. describe:: GEOMETRY

 初期構造を設定します。

 1行目に原子数、2～4行目に格子ベクトル、5行目以降に元素名・原子座標(\ |angs|\ )を指定します。元素名としてXを使うと空孔の意味になります。原子座標の後ろにfixと記載すると、その原子は固定されます。

 .. code-block:: none
  :caption: 例

  108
  12.11678900   0.00000000   0.00000000
   0.00000000  12.11678900   0.00000000
   0.00000000   0.00000000  12.11678900
  X        0.222057  -0.330325  -0.114595
  Al       0.003512   1.943050   2.047290
  Al       2.050750  -0.070341   1.960020
  Al       1.912160   2.024660  -0.301394 fix
  ...

.. |angs| raw:: html

 &#8491;
